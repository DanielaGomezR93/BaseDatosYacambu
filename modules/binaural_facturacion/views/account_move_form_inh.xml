<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_form_move_inherited_binaural_facturacion_form" model="ir.ui.view">
            <field name="name">Extension de formulario factura: agregar campos</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <!--add is_contingence field after other invisibles field-->
                <field name="country_code" position="after">
                    <field name="is_contingence" force_save="1" invisible="1"/><!--desde el menu contingencia setear por defecto-->                    
                </field>

                <!--add nro control-->
                <xpath expr="//h1[@class='mt0']" position="after">
                    <!--visible y requerido para contingencia ya que es editable--> 
                    <label for="correlative" string="Nro Control" style="font-weight:bold;" attrs="{'invisible': [('move_type', 'not in', ('in_invoice','in_refund','out_invoice', 'out_refund'))]}"/>
                    <field name="correlative" force_save="1" attrs="{'invisible': [('move_type', 'not in', ('in_invoice','in_refund','out_invoice', 'out_refund'))],'readonly':[('is_contingence','=',False),('move_type','in',('out_invoice','out_refund'))],'required':[('is_contingence','=',True)]}"/>
                </xpath>

                <!--make name field editable in supplier-->
                <xpath expr="//h1[@class='mt0']" position="replace">
                    <h1 class="mt0" attrs="{'invisible':[('move_type', 'not in',('in_invoice','in_refund','in_receipt')), ('posted_before', '=', False)]}"><!--('name', '=', '/')-->
                        <field name="name" attrs="{'readonly': [('state', '!=', 'draft')],'required':[('move_type', 'in',('in_invoice','in_refund','in_receipt'))]}" placeholder="JRNL/2016/00001"/>
                    </h1>
                </xpath>

                <!--add fields: vat,phone,address,business_name-->
                <field name="partner_id" position="after">
                    <field name="filter_partner" attrs="{'invisible': [('move_type', '=', 'entry')]}"/>
                    <field name="business_name" force_save="1" readonly="1" attrs="{'invisible':['|',('partner_id','=',False),('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}"/>
                    <field name="vat" force_save="1" readonly="1" attrs="{'invisible':['|',('partner_id','=',False),('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}"/>
                    <field name="phone" force_save="1" readonly="1" attrs="{'invisible':['|',('partner_id','=',False),('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}"/>
                    <field name="address" force_save="1" readonly="1" attrs="{'invisible':['|',('partner_id','=',False),('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}"/>            
                </field>


                <!--add field: date_reception-->
                <field name="invoice_date" position="after">
                    <field name="date_reception" options="{'datepicker': {'warn_future': true}}"
                        attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))],'readonly':[('state','=','draft')]}"/>
                    <field name="days_expired" attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt'))]}"/>
                </field>
            </field>
        </record>

	    <!-- ACTION OUT_INVOICE -->

	    <record id="account.action_move_out_invoice_type" model="ir.actions.act_window">
            <field name="name">Invoices</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_invoice')]</field>
            <field name="context">{'default_move_type': 'out_invoice', 'default_filter_partner': 'customer'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a customer invoice
              </p><p>
                Create invoices, register payments and keep track of the discussions with your customers.
              </p>
            </field>
        </record>

	    <!-- ACTION OUT_REFUND -->

	    <record id="account.action_move_out_refund_type" model="ir.actions.act_window">
            <field name="name">Credit Notes</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="account.view_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_refund')]</field>
            <field name="context">{'default_move_type': 'out_refund', 'default_filter_partner': 'customer'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a credit note
              </p><p>
                Note that the easiest way to create a credit note is to do it directly
                from the customer invoice.
              </p>
            </field>
        </record>

	    <!-- ACTION IN_INVOICE -->

	    <record id="account.action_move_in_invoice_type" model="ir.actions.act_window">
            <field name="name">Bills</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="account.view_in_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'in_invoice')]</field>
            <field name="context">{'default_move_type': 'in_invoice', 'default_filter_partner': 'supplier'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a vendor bill
              </p><p>
                Create invoices, register payments and keep track of the discussions with your vendors.
              </p>
            </field>
        </record>

	    <!-- ACTION IN_REFUND -->

	    <record id="account.action_move_in_refund_type" model="ir.actions.act_window">
            <field name="name">Refunds</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="account.view_in_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'in_refund')]</field>
            <field name="context">{'default_move_type': 'in_refund', 'default_filter_partner': 'supplier'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a vendor credit note
              </p><p>
                Note that the easiest way to create a vendor credit note it to do it directly from the vendor bill.
              </p>
            </field>
        </record>


    </data>
</odoo>